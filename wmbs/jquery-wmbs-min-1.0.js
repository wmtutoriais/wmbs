/*
 * desenvolvidor por Welison Menezes
 * welisonmenezes@gmail.com
 */
(function(e){e.fn.wmbs=function(n){var r=e(this);var i={thumb_drag:false,auto:true,auto_time:4e3,pause_hover:true,has_info:false,info_style:false};var s=e.extend(true,i,n);t.init_wmbs(r,s)};var t={init_wmbs:function(n,r){var i=t.get_elements_thumb(n,r);var s=n.children().eq(0);var o=n.children().eq(1).find("ul");var u=o.find("li");var a=u.length;var f=1;var n=n;var r=r;t.style_thumb(n,r);t.style_screen(n,r);if(r.thumb_drag===true)t.drag_move_thumb(n,r);u.find("a").each(function(){var i=e(this);var s=i.attr("href");i.click(function(){return false});e('<img src="'+s+'">').load(function(){f++;if(f==a){t.get_by_link(n,r);t.pagination(n,r);t.pagination_thumb(n,r);t.default_img(n,r);t.temp_auto(n,r);i.click(function(){return true})}})})},default_img:function(e,n){var r=t.get_elements_thumb(e,n);var i=e.children().eq(0);var s=e.children().eq(1).find("ul");var o=s.find("li");var u=o.find("a").eq(0);t.effects.fade(e,n,u.attr("href"),u.attr("title"),i,r)},pagination:function(n,r){var i=new String(r.pagination.next);var s=new String(r.pagination.prev);var o=e("."+i);var u=e("."+s);var a=n.children().eq(1).find("ul").find("img").length;var f=1;o.click(function(){var e=t.get_elements_thumb(n,r);var i=e.a_index;var s=e.active.parent().width();var o=s*(i+1);o=Math.round(o);if(f>=a||a==e.a_index+1){t.transition(n,r,"left","last",o);f=1;return false}t.transition(n,r,"left",undefined,o);f++;return false});u.click(function(){var e=t.get_elements_thumb(n,r);var i=e.a_index;var s=e.active.parent().width();var o=s*(i+1)-s*2;o=Math.round(o);if(f<=1&&e.a_index==0){t.transition(n,r,"left","first",o);f=a-1;return false}t.transition(n,r,"right",undefined,o);f--;return false})},pagination_thumb:function(n,r){var i=new String(r.pagination_thumb.next);var s=new String(r.pagination_thumb.prev);var o=e("."+i);var u=e("."+s);var a=t.get_elements_thumb(n,r);var f=a.img_thumb.outerWidth(true);var l=a.lis_thumb.length*f;var c=r.box_thumb_size.w*f;c=Math.round(c);o.click(function(){var e=a.ul_thumb.position().left;var t=(l-f*r.box_thumb_size.w)*-1;if(!(e<=t)){a.ul_thumb.animate({left:"-="+c+"px"},"fast")}return false});u.click(function(){var e=a.ul_thumb.position().left;var t=f*r.box_thumb_size.w*-1;if(e<=t){a.ul_thumb.animate({left:"+="+c+"px"},"fast")}else if(e<=0){a.ul_thumb.animate({left:"0px"},"fast")}return false})},transition:function(e,n,r,i,s){var o=typeof i!=="undefined"&&i!==false?i:false;var u=typeof s!=="undefined"&&s!==false?s:false;var a=t.get_elements_thumb(e,n);var f=a.img_thumb.outerWidth(true);var l=a.lis_thumb.length*f-f;if(o===false){if(r=="left"){t.get_active(e,n,"left",o);a.ul_thumb.animate({left:"-"+u+"px"},"fast")}if(r=="right"){t.get_active(e,n,"right",o);a.ul_thumb.animate({left:"-"+u+"px"},"fast")}}if(o=="last"){t.get_active(e,n,"",o);a.ul_thumb.animate({left:"0px"},"fast")}if(o=="first"){t.get_active(e,n,"",o);a.ul_thumb.animate({left:"-"+l+"px"},"fast")}},get_by_link:function(n,r){var i=t.get_elements_thumb(n,r);i.a_thumb.each(function(s){var s=s;var o=e(this);o.click(function(){var s=i.a_thumb.index(e(this));i.lis_thumb.removeClass(""+i.active_thumb);e(this).parent().addClass(""+i.active_thumb);var o=t.get_elements_thumb(n,r);var u=o.a_index;var a=o.active.parent().width();var f=a*(u+1)-a;f=Math.round(f);t.get_screen(n,r);i.ul_thumb.animate({left:"-"+f+"px"},"fast");return false})})},auto_thumb:function(e,n,r){var r=typeof r!=="undefined"&&r!==false?r:false;var i=t.get_elements_thumb(e,n);var s=i.lis_thumb.length;var o=i.a_index;var u=i.active.parent().width();var a=u*(o+1);a=Math.round(a);if(r===true){if(o+1==s){t.transition(e,n,"left","last",a)}else{t.transition(e,n,"left",undefined,a)}}},temp_auto:function(e,n){if(n.auto===true){var r=window.setInterval(function(){t.auto_thumb(e,n,true)},n.auto_time);if(n.pause_hover===true){var i=0;e.hover(function(){window.clearTimeout(r);i=1},function(){if(i==1){r=window.setInterval(function(){t.auto_thumb(e,n,true)},n.auto_time);i=0}})}}},get_active:function(e,n,r,i){p=i;var s=t.get_elements_thumb(e,n);s.lis_thumb.removeClass(""+s.active_thumb);if(p===false){if(r=="left"){s.active.parent().next().addClass(""+s.active_thumb);t.get_screen(e,n)}if(r=="right"){s.active.parent().prev().addClass(""+s.active_thumb);t.get_screen(e,n)}}if(p=="last"){s.ul_thumb.find("li").eq(0).addClass(""+s.active_thumb);t.get_screen(e,n)}if(p=="first"){s.ul_thumb.find("li").last().addClass(""+s.active_thumb);t.get_screen(e,n)}},get_screen:function(e,n){var r=t.get_elements_thumb(e,n);var i=e.children().eq(0);var r=t.get_elements_thumb(e,n);t.effects.fade(e,n,r.active.attr("href"),r.active.attr("title"),i,r)},effects:{fade:function(n,r,i,s,o,u){e("> img",o).removeClass("wmbs_img_screen").addClass("wmbs_img_del").css({"z-index":"9"});e("> div",o).fadeIn("fast");e('<img src="'+i+'">').load(function(){var i=e(this);i.css({display:"none",position:"absolute",top:"0px",left:"0px","z-index":"10"}).addClass("wmbs_img_screen").attr("alt",s);o.prepend(i);if(r.has_info===true){var a=t.insert_txt(n,r,u);o.prepend(a);e(".wmbs_txt").fadeIn("fast")}i.fadeIn("fast",function(){e(".wmbs_img_del").remove();e(".wmbs_txt").css({display:"block"});e("> div",o).fadeOut("fast")})})}},insert_txt:function(t,n,r){e(".wmbs_txt").fadeOut("fast",function(){e(this).remove()});var i=r.active;var s=i.parent();var o=e("span",s).eq(0).html();var u=e("<span></span>").attr("class","wmbs_txt_1 wmbs_txt").html(o);if(n.info_style===false){u.css({position:"absolute",bottom:"0px",width:"100%",display:"none","z-index":"12",background:"#000",color:"#fff",padding:"5px 0px","text-align":"center"}).hide()}else{u.css(n.info_style).hide()}return u},drag_move_thumb:function(e,n){var r=e.children().eq(1);var i=r.find("ul");var s=t.get_elements_thumb(e,n);var o=s.lis_thumb.length;var u=s.lis_thumb.outerWidth();i.draggable({scroll:false,axis:"x",iframeFix:true,start:function(e,t){i.find("a").unbind("click");return true},stop:function(r,s){i.find("a").click(function(){return false});setTimeout(function(){t.get_by_link(e,n)},200);var a=s.position.left;var f=(i.outerWidth()-u)*-1;var l=o*u-u;if(a*-1>=l){i.css({top:0,left:f+"px"})}if(a>1){i.css({left:"0px"})}return true}})},get_elements_thumb:function(t,n){var r=t.children().eq(1).find("ul");var i=r.find("li");var s=i.find("a");var o=new String(n.active_thumb);var u=e("."+o+" a");var a=s.index(u);var f=t.children().eq(1).find("ul").find("img");var l={ul_thumb:r,lis_thumb:i,a_thumb:s,active_thumb:o,active:u,a_index:a,img_thumb:f};return l},get_center_load:function(t,n){var t=t.children().eq(0);var r=e("> div",t);var i=n.screen_size.w;var s=n.screen_size.h;var o=r.width();var u=r.height();var a=i/2;var f=s/2;var l=o/2;var c=u/2;var h=a-l;var p=f-c;var d={x:h,y:p};return d},style_screen:function(n,r){var i=t.get_center_load(n,r);var s=n.children().eq(0);var o=e("> div",s);n.css({position:"relative"});s.css({width:r.screen_size.w+"px",height:r.screen_size.h+"px",margin:"0px auto",overflow:"hidden",position:"relative"});o.css({position:"absolute",left:i.x+"px",top:i.y+"px","z-index":"111"})},style_thumb:function(e,t){var n=e.children().eq(1);var r=n.find("ul");var i=r.find("li");var s=r.find("img");var o=r.find("img").eq(0);var u=new String(t.active_thumb);var a=o.outerHeight(true);var f=o.outerWidth(true);n.css({overflow:"hidden",width:f*t.box_thumb_size.w+"px",height:t.box_thumb_size.h+"px",margin:"0px auto",position:"relative","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none"});r.css({width:f*s.length+"px",height:a+"px",position:"absolute",left:"0px",top:"0px"});i.css({"float":"left"});i.first().addClass(""+u)}}})(jQuery)